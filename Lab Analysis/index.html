<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Интерпретация результатов анализов крови</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body {
      font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
      background: #e0e5ec;
      color: #5a6470; /* Base text color for neomorphism */
      transition: background-color 0.3s ease;
      font-size: 16px; /* Base font size - 1rem */
      line-height: 1.6;
      --font-size-standard: 1rem; /* 16px */
      --font-size-large: 1.25rem; /* 20px - Reduced from 1.5rem */
    }

    /* Custom scrollbar for neomorphic aesthetics */
    ::-webkit-scrollbar {
      width: 10px;
      height: 10px;
    }
    ::-webkit-scrollbar-track {
      background: #d1d9e6; 
      border-radius: 5px;
    }
    ::-webkit-scrollbar-thumb {
      background: #b0bac5;
      border-radius: 5px;
      border: 2px solid #e0e5ec; /* Creates a pseudo-padding around thumb */
    }
    ::-webkit-scrollbar-thumb:hover {
      background: #9aa7b5;
    }

    /* Neomorphism Base & Utilities */
    .neo {
      border-radius: 12px;
      background: #e0e5ec;
      transition: box-shadow 0.25s ease-out, background-color 0.25s ease-out;
    }

    .neo-outset {
      box-shadow: 5px 5px 12px #a3b1c6, -5px -5px 12px #ffffff;
    }
    .neo-outset-deep { /* For main card or prominent elements */
      border-radius: 18px; /* Slightly larger rounding */
      box-shadow: 7px 7px 15px #a3b1c6, -7px -7px 15px #ffffff;
    }

    .neo-inset {
      box-shadow: inset 5px 5px 12px #a3b1c6, inset -5px -5px 12px #ffffff;
    }
    .neo-inset-strong { /* For things like input fields or pressed states if deeper look desired */
      background: linear-gradient(145deg, #caced4, #f0f8ff);
      box-shadow: inset 6px 6px 13px #a3b1c6, inset -6px -6px 13px #ffffff;
    }

    /* Buttons */
    .neo-button {
      /* neo-outset will be applied for base state */
      color: #5a6470;
      font-weight: 600; /* Standard font-weight for buttons */
      cursor: pointer;
      user-select: none;
      outline: none;
      border: none; /* Remove default browser borders */
      font-size: var(--font-size-standard); /* Ensure buttons use standard font size */
    }

    .neo-button:hover:not(:disabled) {
      box-shadow: 3px 3px 8px #a3b1c6, -3px -3px 8px #ffffff; /* Softer shadow on hover */
      /* color: #4d555e; Slightly darker text on hover */
    }

    .neo-button:active:not(:disabled), .neo-button.active:not(:disabled) {
      box-shadow: inset 4px 4px 8px #a3b1c6, inset -4px -4px 8px #ffffff;
      background: linear-gradient(145deg, #cdd4db, #f0f5fa); /* Slight gradient for pressed feel */
      color: #505a63; /* Slightly deeper text color when active */
    }

    .neo-button:disabled, .neo-button.disabled {
      background: #e0e5ec; /* Flat background */
      box-shadow: none; /* Flat, no extrusion */
      color: #9aabbc; /* Muted text color */
      cursor: not-allowed;
    }
    .neo-button:focus-visible:not(:disabled) {
        box-shadow: inset 2px 2px 4px #a3b1c6, inset -2px -2px 4px #ffffff, 0 0 0 2px #a3b1c6a0; /* Subtle focus ring */
    }

    /* Styles for .prose elements with Neomorphic colors & two font sizes */
    .prose {
      color: #5a6470;
    }
    .prose > :first-child { margin-top: 0; }
    .prose > :last-child { margin-bottom: 0; }

    .prose p, .prose ul, .prose ol, .prose dl, .prose blockquote, .prose pre, .prose table, .prose li {
        margin-top: 1em;
        margin-bottom: 1em;
        font-size: var(--font-size-standard);
        line-height: 1.65;
    }
    .prose ul, .prose ol {
        padding-left: 1.75em;
    }
    .prose ul { list-style-type: disc; }
    .prose ol { list-style-type: decimal; }

    .prose ul ul, .prose ul ol, .prose ol ul, .prose ol ol {
        margin-top: 0.5em;
        margin-bottom: 0.5em;
    }
    .prose li {
        margin-top: 0.4em;
        margin-bottom: 0.4em;
    }
    .prose li > p {
        margin-top: 0.5em;
        margin-bottom: 0.5em;
    }
    /* Headings: H1, H2 are Large; H3-H6 are Standard but bold */
    .prose h1, .prose h2, .prose h3, .prose h4, .prose h5, .prose h6 {
        margin-top: 1.5em;
        margin-bottom: 0.75em;
        font-weight: 600; /* Bold for all headings */
        line-height: 1.3;
        color: #4d555e;
    }
    .prose h1, .prose h2 { font-size: var(--font-size-large); }
    .prose h3, .prose h4, .prose h5, .prose h6 { font-size: var(--font-size-standard); }

    .prose hr {
        margin-top: 2.5em;
        margin-bottom: 2.5em;
        border: 0;
        height: 2px; /* Slightly thicker hr */
        border-radius: 1px;
        background: #c8d0d9; /* Solid, subtle line */
    }
    .prose blockquote {
        padding: 1em 1.2em;
        margin-left:0;
        margin-right:0;
        border-radius: 10px;
        background: #e0e5ec;
        box-shadow: inset 4px 4px 8px #a3b1c6, inset -4px -4px 8px #ffffff;
        color: #6b7785;
        font-style: normal; /* No italics */
        border-left: 4px solid #b0bac5; /* Subtle left border */
    }
    .prose blockquote p:first-of-type::before { content: none; }
    .prose blockquote p:last-of-type::after { content: none; }

    .prose strong { font-weight: 700; color: #4d555e; }
    .prose em { font-style: normal; /* Override italic if 'em' tags are used */ }
    .prose a {
        color: #0077cc; /* Standard accessible blue */
        text-decoration: none;
        font-weight: 600;
        border-bottom: 1px solid transparent;
        transition: color 0.2s ease, border-bottom-color 0.2s ease;
    }
    .prose a:hover {
        color: #0055aa;
        border-bottom: 1px solid #005fa9a0;
    }
    .prose code { /* Inline code */
      padding: 0.25em 0.5em;
      margin: 0 0.15em;
      border-radius: 6px;
      font-size: 0.9em;
      background: #e0e5ec;
      box-shadow: inset 2px 2px 5px #a3b1c6, inset -2px -2px 5px #ffffff;
      color: #525c66;
      word-break: break-all;
    }
    .prose pre { /* Code block */
        color: #525c66;
        padding: 1.2em;
        border-radius: 10px;
        overflow-x: auto;
        word-break: break-all;
        white-space: pre-wrap;
        background: #e0e5ec;
        box-shadow: inset 5px 5px 10px #a3b1c6, inset -5px -5px 10px #ffffff;
    }
    .prose pre code {
      background-color: transparent;
      padding: 0;
      margin: 0;
      font-size: inherit;
      border-radius: 0;
      color: inherit;
      box-shadow: none;
      word-break: inherit;
      white-space: inherit;
    }
    .prose table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
        font-size: var(--font-size-standard);
        border-radius: 10px; /* Rounded table */
        box-shadow: 4px 4px 8px #a3b1c6, -4px -4px 8px #ffffff; /* Outset shadow for table */
        overflow: hidden; /* Important for border-radius on table */
    }
    .prose th, .prose td {
        border-bottom: 1px solid #c8d0d9;
        padding: 0.75em 1em;
        text-align: left;
    }
    .prose th:first-child, .prose td:first-child { border-left: 0; }
    .prose th:last-child, .prose td:last-child { border-right: 0; }
    .prose tr:last-child td { border-bottom: 0; }

    .prose thead th {
        background-color: #d1d9e6; /* Header background for table */
        font-weight: 600;
        color: #4d555e;
        border-bottom-width: 2px; /* Stronger border under header */
    }
    .prose tbody tr:nth-child(even) {
      /* background-color: #e8edf2; /* Subtle zebra striping if desired, for now keeping it clean */
    }
    .prose img {
        margin-top: 2em;
        margin-bottom: 2em;
        border-radius: 10px;
        box-shadow: 6px 6px 12px #a3b1c6, -6px -6px 12px #ffffff;
        max-width: 100%;
        height: auto;
        display: block; /* Helps with centering if margin auto is used */
    }

  </style>
<script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.1.0",
    "react-dom/": "https://esm.sh/react-dom@^19.1.0/",
    "react/": "https://esm.sh/react@^19.1.0/",
    "react-markdown": "https://esm.sh/react-markdown@^10.1.0",
    "remark-gfm": "https://esm.sh/remark-gfm@^4.0.1"
  }
}
</script>
<link rel="stylesheet" href="/index.css">
</head>
<body>
  <div id="root"></div>
  <script type="module" src="/index.tsx"></script>
  <script>
    // Ensure Telegram.WebApp is available or script runs after Telegram SDK is loaded
    if (window.Telegram && window.Telegram.WebApp) {
      function setThemeClass() {
        Telegram.WebApp.expand();
        // The property viewportStableHeight is read-only. Setting it might not have the intended effect.
        // It typically provides the stable viewport height.
        // Telegram.WebApp.viewportStableHeight = 100; 

        // Отключаем вертикальный свайп
        if (Telegram.WebApp.disableVerticalSwipes) {
          Telegram.WebApp.disableVerticalSwipes();
        } else {
          // Альтернативный метод для предотвращения закрытия при свайпе вниз
          // This fallback might have unintended side effects on scrolling within your app.
          // Test thoroughly.
          const overflow = 100;
          document.body.style.overflowY = 'hidden';
          document.body.style.marginTop = `${overflow}px`;
          document.body.style.height = window.innerHeight + overflow + "px";
          document.body.style.paddingBottom = `${overflow}px`;
          window.scrollTo(0, overflow);

          let ts;
          const onTouchStart = (e) => {
            ts = e.touches[0].clientY;
          };
          const onTouchMove = (e) => {
            const scroll = document.body.scrollTop || document.documentElement.scrollTop;
            const te = e.changedTouches[0].clientY;
            if (scroll <= 0 && ts < te) {
              e.preventDefault();
            }
          };
          document.documentElement.addEventListener('touchstart', onTouchStart, { passive: false });
          document.documentElement.addEventListener('touchmove', onTouchMove, { passive: false });
        }
      }

      Telegram.WebApp.onEvent('themeChanged', setThemeClass);
      // Call once on initial load if Telegram.WebApp is ready
      if (Telegram.WebApp.initData !== undefined) {
          setThemeClass();
      } else {
        // Fallback or wait for WebApp to be ready if needed, though onEvent usually covers it.
        // For example, if script is placed before SDK fully initializes.
        // A simple timeout or a more robust ready check might be needed if issues persist.
        // However, standard practice is that SDK is available.
        // If this script is at the end of body, Telegram object should be there.
         setTimeout(setThemeClass, 0); // Defer to next tick
      }
    } else {
      // Optional: Log if Telegram.WebApp is not found, for debugging outside Telegram environment.
      // console.log("Telegram.WebApp not found. Skipping Mini App specific setup.");
    }
  </script>
</body>
</html>